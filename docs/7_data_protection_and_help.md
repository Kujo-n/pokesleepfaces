# データ保護警告とヘルプ機能の実装

## 概要

未ログインユーザーに対してデータ消失のリスクを伝え、ログインを促すための機能を実装しました。また、アプリの使い方を説明するヘルプ・FAQ機能も追加しました。

## 実装内容

### 1. データ保護警告バナー (`components/DataProtectionWarning.tsx`)

#### 機能
- 未ログインユーザーに対して、ヘッダー直下に警告バナーを表示
- ログイン済みユーザーには表示されない

#### 表示内容
- **タイトル**: 「データに関する注意事項」
- **説明文**:
  - ログインしていない場合、データはブラウザ内に保存される
  - 閲覧データの削除を行うと入力データが消失する
  - ログインすることでデータがクラウドに保護される

#### デザイン
- 黄色（amber）の背景色で注意を引く
- 警告アイコン（三角形の感嘆符）を表示
- シンプルな情報表示のみ（ボタンなし）

### 2. ヘルプ・FAQモーダル (`components/HelpModal.tsx`)

#### 機能
- ナビゲーションバー下端の「ヘルプ・使い方」ボタンから開く
- モーダル形式で表示
- スクロール可能なFAQコンテンツ

#### FAQ内容

**Q. ログインしないと利用できませんか？**
- ログインなしでも利用可能
- ただし、別端末へのデータ移行や共有はできない
- データはブラウザ内に保存される

**Q. 機種変更時などのデータ移行はどうすればよいですか？**
- Googleアカウントでログインする
- 初回ログイン以降はデータがクラウドに保存される
- 同じGoogleアカウントを使用することでどの端末でもデータを共有できる

**Q. ブラウザの履歴を削除したら記録も消えてしまいました。**
- Googleアカウントでログインすると、最後にログインしていた時の入力状態に復元される
- ログインせずに利用していた場合は復元不可

**Q. フィルタの使い方は？**
- **フィールド**: 指定フィールドに出現するポケモンのみを表示
- **睡眠タイプ**: 指定睡眠タイプの寝顔のみを表示
- **未収集のみ**: チェックを入れると、まだ寝顔を持っていないポケモンのみを表示

### 3. UI配置の変更 (`app/page.tsx`)

#### ヘルプボタンの配置
- ヘッダーのヘルプアイコン（ログインボタン左）を削除
- ナビゲーションバー内の「ヘルプ・使い方」ボタンを下端に配置
  - `mt-auto` クラスを使用して常に下端に表示
  - モバイル・デスクトップ両方で一貫した配置

#### データ保護警告バナーの配置
- ヘッダー直下に配置
- 全幅表示で視認性を確保

## ユーザー体験の改善

### 未ログインユーザー
1. アプリを開くと、ヘッダー直下に警告バナーが表示される
2. データ消失のリスクを理解できる
3. ナビゲーションバーの「ヘルプ・使い方」から詳細情報を確認できる
4. 必要に応じて画面右上からログインできる

### ログイン済みユーザー
1. 警告バナーは表示されない
2. ヘルプ・FAQは引き続き利用可能
3. データはクラウドに安全に保存される

## 技術的な実装詳細

### コンポーネント構成
```
app/
  page.tsx                          # メインページ（警告バナーとヘルプモーダルを統合）
components/
  DataProtectionWarning.tsx         # データ保護警告バナー
  HelpModal.tsx                     # ヘルプ・FAQモーダル
  AuthButton.tsx                    # 認証ボタン（既存）
```

### 状態管理
- `DataProtectionWarning`: Firebase Authの状態を監視し、未ログイン時のみ表示
- `HelpModal`: `isHelpOpen` 状態で開閉を制御
- モーダル表示時はbodyのスクロールを無効化

### スタイリング
- Tailwind CSSを使用
- レスポンシブデザイン対応
- アクセシビリティを考慮（aria-label、適切なコントラスト比）

## 今後の改善案

- 警告バナーの表示頻度の調整（例：一定期間後に再表示）
- FAQの内容を使用状況に応じて拡充
- 多言語対応の検討
